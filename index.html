<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Checkout a Family of Git Repositories • checkout</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Checkout a Family of Git Repositories">
<meta property="og:description" content="The goal of this package is to checkout a set of
    git repositories in a way similar to
    &lt;https://github.com/actions/checkout&gt;, to reproduce locally what you
    may usually do in GitHub actions. It is most useful to test locally
    the latest commit of the working directory in the context of the
    master branch of one or multiple other repositories.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">checkout</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/maurolepore/checkout/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="checkout" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#checkout" class="anchor"></a>checkout</h1></div>
<!-- badges: start -->

<p>The goal of this package is to checkout a set of git repositories in a way similar to <a href="https://github.com/actions/checkout" class="uri">https://github.com/actions/checkout</a>, to reproduce locally what you may usually do in GitHub actions. It is most useful to test locally the latest commit of the working directory in the context of the master branch of one or multiple other repositories.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the development version of checkout from GitHub with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("devtools")</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span><span class="op">(</span><span class="st">"maurolepore/checkout"</span><span class="op">)</span></code></pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>This is a basic example which shows you how to solve a common problem:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/maurolepore/checkout">checkout</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/gert/">gert</a></span><span class="op">)</span>
<span class="co">#&gt; Linking to libgit2 v0.26.0, ssh support: YES</span>
<span class="co">#&gt; Global config: /home/mauro/.gitconfig</span>
<span class="co">#&gt; Default user: Mauro Lepore &lt;maurolepore@gmail.com&gt;</span></code></pre></div>
<p>Setup two minimal repositories.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">repo_a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"repo_a"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span><span class="op">(</span><span class="va">repo_a</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/files.html">file.create</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">repo_a</span>, <span class="st">"a-file.txt"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="fu"><a href="https://docs.ropensci.org/gert/reference/git_repo.html">git_init</a></span><span class="op">(</span><span class="va">repo_a</span><span class="op">)</span>
<span class="fu"><a href="https://docs.ropensci.org/gert/reference/git_commit.html">git_add</a></span><span class="op">(</span><span class="st">"."</span>, repo <span class="op">=</span> <span class="va">repo_a</span><span class="op">)</span>
<span class="co">#&gt;         file status staged</span>
<span class="co">#&gt; 1 a-file.txt    new   TRUE</span>
<span class="fu"><a href="https://docs.ropensci.org/gert/reference/git_commit.html">git_commit_all</a></span><span class="op">(</span><span class="st">"New file"</span>, repo <span class="op">=</span> <span class="va">repo_a</span><span class="op">)</span>
<span class="co">#&gt; [1] "4107073d3271e6ad7c4a6c046239b459780b9921"</span>

<span class="va">repo_b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"repo_b"</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/files2.html">dir.create</a></span><span class="op">(</span><span class="va">repo_b</span><span class="op">)</span>
<span class="fu"><a href="https://rdrr.io/r/base/files.html">file.create</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html">file.path</a></span><span class="op">(</span><span class="va">repo_b</span>, <span class="st">"a-file.txt"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] TRUE</span>
<span class="fu"><a href="https://docs.ropensci.org/gert/reference/git_repo.html">git_init</a></span><span class="op">(</span><span class="va">repo_b</span><span class="op">)</span>
<span class="fu"><a href="https://docs.ropensci.org/gert/reference/git_commit.html">git_add</a></span><span class="op">(</span><span class="st">"."</span>, repo <span class="op">=</span> <span class="va">repo_b</span><span class="op">)</span>
<span class="co">#&gt;         file status staged</span>
<span class="co">#&gt; 1 a-file.txt    new   TRUE</span>
<span class="fu"><a href="https://docs.ropensci.org/gert/reference/git_commit.html">git_commit_all</a></span><span class="op">(</span><span class="st">"New file"</span>, repo <span class="op">=</span> <span class="va">repo_b</span><span class="op">)</span>
<span class="co">#&gt; [1] "4107073d3271e6ad7c4a6c046239b459780b9921"</span></code></pre></div>
<p>If we set the directory at <code>repo_a</code>, it stays at the branch <code>pr</code>, whereas the <code>repo_b</code> changes to the branch <code>master</code> (or <code>main</code>).</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/getwd.html">setwd</a></span><span class="op">(</span><span class="va">repo_a</span><span class="op">)</span>

<span class="fu"><a href="https://docs.ropensci.org/gert/reference/git_branch.html">git_branch_create</a></span><span class="op">(</span><span class="st">"pr"</span>, checkout <span class="op">=</span> <span class="cn">TRUE</span>, repo <span class="op">=</span> <span class="va">repo_a</span><span class="op">)</span>
<span class="fu"><a href="https://docs.ropensci.org/gert/reference/git_branch.html">git_branch_create</a></span><span class="op">(</span><span class="st">"pr"</span>, checkout <span class="op">=</span> <span class="cn">TRUE</span>, repo <span class="op">=</span> <span class="va">repo_b</span><span class="op">)</span>

<span class="co"># Before</span>
<span class="fu"><a href="https://docs.ropensci.org/gert/reference/git_branch.html">git_branch</a></span><span class="op">(</span><span class="va">repo_a</span><span class="op">)</span>
<span class="co">#&gt; [1] "pr"</span>
<span class="fu"><a href="https://docs.ropensci.org/gert/reference/git_branch.html">git_branch</a></span><span class="op">(</span><span class="va">repo_b</span><span class="op">)</span>
<span class="co">#&gt; [1] "pr"</span>

<span class="fu"><a href="reference/checkout.html">checkout</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">repo_a</span>, <span class="va">repo_b</span><span class="op">)</span><span class="op">)</span>

<span class="co"># After</span>
<span class="fu"><a href="https://docs.ropensci.org/gert/reference/git_branch.html">git_branch</a></span><span class="op">(</span><span class="va">repo_a</span><span class="op">)</span>
<span class="co">#&gt; [1] "pr"</span>
<span class="fu"><a href="https://docs.ropensci.org/gert/reference/git_branch.html">git_branch</a></span><span class="op">(</span><span class="va">repo_b</span><span class="op">)</span>
<span class="co">#&gt; [1] "master"</span></code></pre></div>
<p>This behaviour is inspired by the <code>ref</code> argument of <a href="https://github.com/actions/checkout" class="uri">https://github.com/actions/checkout</a> and helps work locally in a way similar to GitHub actions.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/maurolepore/checkout/">https://​github.com/​maurolepore/​checkout/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/maurolepore/checkout/issues">https://​github.com/​maurolepore/​checkout/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Mauro Lepore <br><small class="roles"> Author, contractor, maintainer </small> <a href="https://orcid.org/0000-0002-1986-7988" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>2 Degrees Investing Initiative <br><small class="roles"> Copyright holder, funder </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/maurolepore/checkout/actions"><img src="https://github.com/maurolepore/checkout/workflows/R-CMD-check/badge.svg" alt="R-CMD-check"></a></li>
<li><a href="https://codecov.io/gh/maurolepore/checkout?branch=main"><img src="https://codecov.io/gh/maurolepore/checkout/branch/main/graph/badge.svg" alt="Codecov test coverage"></a></li>
<li><a href="https://CRAN.R-project.org/package=checkout"><img src="https://www.r-pkg.org/badges/version/checkout" alt="CRAN status"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Mauro Lepore, 2 Degrees Investing Initiative.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
